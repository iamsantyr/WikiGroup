<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{_fragments/layout :: layout(~{::section})}">
<head>
  <meta charset="UTF-8">
  <title th:text="${pageTitle} ?: 'Mensajes recibidos'">Mensajes recibidos</title>
</head>
<body>
<section>
  <h2>Mensajes recibidos</h2>

  <div th:if="${okMsg}" class="ok" th:text="${okMsg}" style="color:#0a7b28; margin:.5rem 0;"></div>
  <div th:if="${errorMsg}" class="error" th:text="${errorMsg}" style="color:#c00; margin:.5rem 0;"></div>

  <div th:if="${#lists.isEmpty(items)}">
    <p>No hay mensajes registrados aún.</p>
    <p><a th:href="@{/contacto}">Ir al formulario de contacto →</a></p>
  </div>

  <div th:unless="${#lists.isEmpty(items)}" style="overflow-x:auto;">
    <table style="width:100%; border-collapse:collapse;">
      <thead>
      <tr>
        <th style="text-align:left;border-bottom:1px solid #ddd;padding:.5rem;">ID</th>
        <th style="text-align:left;border-bottom:1px solid #ddd;padding:.5rem;">Fecha</th>
        <th style="text-align:left;border-bottom:1px solid #ddd;padding:.5rem;">Nombres</th>
        <th style="text-align:left;border-bottom:1px solid #ddd;padding:.5rem;">Apellidos</th>
        <th style="text-align:left;border-bottom:1px solid #ddd;padding:.5rem;">Correo</th>
        <th style="text-align:left;border-bottom:1px solid #ddd;padding:.5rem;">Semestre</th>
        <th style="text-align:left;border-bottom:1px solid #ddd;padding:.5rem;">Descripción</th>
        <th style="text-align:left;border-bottom:1px solid #ddd;padding:.5rem;">Acciones</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="c : ${items}">
        <td style="border-bottom:1px solid #eee;padding:.5rem;" th:text="${c.id}">1</td>
        <td style="border-bottom:1px solid #eee;padding:.5rem;"
            th:text="${#temporals.format(c.createdAt, 'yyyy-MM-dd HH:mm')}">2025-08-14 14:30</td>
        <td style="border-bottom:1px solid #eee;padding:.5rem;" th:text="${c.nombres}">NOMBRES</td>
        <td style="border-bottom:1px solid #eee;padding:.5rem;" th:text="${c.apellidos}">APELLIDOS</td>
        <td style="border-bottom:1px solid #eee;padding:.5rem;" th:text="${c.correo}">CORREO</td>
        <td style="border-bottom:1px solid #eee;padding:.5rem;" th:text="${c.semestre}">0</td>
        <td style="border-bottom:1px solid #eee;padding:.5rem;" th:text="${c.descripcion}">TEXTO…</td>
        <td style="border-bottom:1px solid #eee;padding:.5rem;">
          <form th:action="@{|/mensajes/${c.id}/eliminar|}" method="post"
                onsubmit="return confirm('¿Eliminar el mensaje #'+this.dataset.id+'?');"
                th:attr="data-id=${c.id}">
            <button type="submit" style="background:#c00;color:#fff;border:none;padding:.4rem .6rem;border-radius:.3rem;cursor:pointer;">
              Eliminar
            </button>
          </form>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  <p style="margin-top:1rem;">
    <a th:href="@{/contacto}">← Volver al formulario</a>
  </p>
</section>
</body>
</html>
